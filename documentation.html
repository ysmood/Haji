<html>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link rel="icon" href="http://ysmood.org/favicon.ico" />

  <style type="text/css">
    body { font-size: 14px; font-family: "Open Sans", Helvetica, Arial, sans-serif; padding-bottom: 800px; padding: 10px }
    h1 { font-size: 30px; color: #248; }
    h2 { font-size: 24px; }
    h3 { font-size: 18px; }
    pre { color: #832BAC; }
    hr { border-top: 1px dashed #fff; border-bottom: 1px dashed #C09053; }
    table { font-size: 14px; border: 1px dashed #aaa; margin: 10px 0; }
    table tr:first-child { text-align: right; }
    .em { color: #E21010; }   /* emphasis */
    .al { color: #C4259D; }   /* alert */
    .pt { color: #2BAC45; }   /* point */
    .large { font-size: 18px; }
    .grey { color: #777; }
    .code { font-family:  monospace, Courier; }
    .center { text-align: center; }

    li {
      padding: 3px 10px;
      border-radius: 3px;
      -webkit-transition: all 0.1s ease-out;
      -moz-transition: all 0.1s ease-out;
      -o-transition: all 0.1s ease-out;
      -ms-transition: all 0.1s ease-out;
      transition: all 0.1s ease-out;

      /* fix blinking bug */
      -webkit-backface-visibility: hidden;
      -webkit-perspective: 1000;
    }
    li:hover {
      background: rgba(255, 255, 255, 0.5);
      box-shadow: 1px 1px 3px #aaa;
    }
  </style>
  <title>Haji - Ubuntu Server Documentation</title>
<body>
      
  <h1>Haji - Ubuntu Server</h1>
  <p class="large">
    This documentation will explain some basic features of this virtual machine.
    Check updates at here: <a target="_blank" href="http://goo.gl/ZZlnp">Google Drive</a>.
    If you have any question, you can find me <a href="http://ysmood.org">here</a>. 
  </p>
  <p class="al">
    â€» Your browser should support SVG, so that the diagrams on this page can be rendered properly.
  </p>

  <ul>

    <li>
      <h2>About</h2>
      <p>
        Haji is base on Ubuntu server 12 and is intended to make the developers' life easier.
        Therefore all settings in Haji is <span class="al">not</span> for a product environment, 
        and it is <span class="al">insecure</span> to directly connect it to the public network.
      </p>
      <p>
        Although you can use the Virtual Box to play with this vm other than Vmware, 
        but you should know some disadvantages of the Virtual Box:
      </p>
      <ul>
        <li>You can't connect your vm directly through NAT mode, and Bridge mode can cause security problems.</li>
        <li>
          Only samba sharing is supported between host and guest. 
          And if you want support for sharing from host directly, you need to setup Guest Addition manually.
        </li>
      </ul>
    </li>

    <li>
      <h2>Development Out of the Box</h2>
      <p>
        There two available ways to sharing file system between the host and the vm. The Samba service from the vm,
        or the Vmware based file sharing service.
      </p>
      <p style="text-align: center">
        <svg xmlns="http://www.w3.org/2000/svg" width="556px" height="517px" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" style="background-color: rgb(255, 255, 255);"><defs/><g transform="translate(0.5,0.5)"><path d="M 2 25 L 2 2 L 552 2 L 552 25 Z" fill="#d0d0d0" stroke="#d0d0d0" stroke-miterlimit="10" transform="translate(2,3)" opacity="1"/><path d="M 2 25 L 2 2 L 552 2 L 552 25 Z" fill="#fff4c3" stroke="#000000" stroke-miterlimit="10"/><path d="M 2 25 L 2 512 L 552 512 L 552 25" fill="none" stroke="#d0d0d0" stroke-miterlimit="10" transform="translate(2,3)" opacity="1"/><path d="M 2 25 L 2 512 L 552 512 L 552 25" fill="none" stroke="#000000" stroke-miterlimit="10"/><g transform="translate(4,7)"><switch><foreignObject pointer-events="all" width="546" height="14" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 14px; vertical-align: top; width: 546px; white-space: normal; font-weight: bold; text-align: center;">Host Machine</div></foreignObject><text x="273" y="13" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Object]</text></switch></g><path d="M 22 65 L 22 42 L 362 42 L 362 65 Z" fill="#d0d0d0" stroke="#d0d0d0" stroke-miterlimit="10" transform="translate(2,3)" opacity="1"/><path d="M 22 65 L 22 42 L 362 42 L 362 65 Z" fill="#d4e1f5" stroke="#000000" stroke-miterlimit="10"/><path d="M 22 65 L 22 482 L 362 482 L 362 65" fill="none" stroke="#d0d0d0" stroke-miterlimit="10" transform="translate(2,3)" opacity="1"/><path d="M 22 65 L 22 482 L 362 482 L 362 65" fill="none" stroke="#000000" stroke-miterlimit="10"/><g transform="translate(24,47)"><switch><foreignObject pointer-events="all" width="336" height="14" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 14px; vertical-align: top; width: 336px; white-space: normal; font-weight: bold; text-align: center;">Haji Server</div></foreignObject><text x="168" y="13" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Object]</text></switch></g><path d="M 42 105 L 42 82 L 252 82 L 252 105 Z" fill="#d0d0d0" stroke="#d0d0d0" stroke-miterlimit="10" transform="translate(2,3)" opacity="1"/><path d="M 42 105 L 42 82 L 252 82 L 252 105 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10"/><path d="M 42 105 L 42 262 L 252 262 L 252 105" fill="none" stroke="#d0d0d0" stroke-miterlimit="10" transform="translate(2,3)" opacity="1"/><path d="M 42 105 L 42 262 L 252 262 L 252 105" fill="none" stroke="#000000" stroke-miterlimit="10"/><g transform="translate(44,87)"><switch><foreignObject pointer-events="all" width="206" height="14" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 14px; vertical-align: top; width: 206px; white-space: normal; font-weight: bold; text-align: center;">/home/saya/cosmos/</div></foreignObject><text x="103" y="13" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Object]</text></switch></g><path d="M 82 142 L 142 142 L 142 122 L 202 122 L 202 242 L 82 242 L 82 142 Z" fill="#d0d0d0" stroke="#d0d0d0" stroke-miterlimit="10" transform="translate(2,3)" opacity="1"/><path d="M 82 142 L 142 142 L 142 122 L 202 122 L 202 242 L 82 242 L 82 142 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10"/><path d="M 142 142 L 202 142" fill="none" stroke="#000000" stroke-miterlimit="10"/><g transform="translate(84,175)"><switch><foreignObject pointer-events="all" width="116" height="14" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 14px; vertical-align: top; width: 116px; white-space: normal; text-align: center;">Host shared folder</div></foreignObject><text x="58" y="13" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Object]</text></switch></g><path d="M 82 332 L 142 332 L 142 312 L 202 312 L 202 432 L 82 432 L 82 332 Z" fill="#d0d0d0" stroke="#d0d0d0" stroke-miterlimit="10" transform="translate(2,3)" opacity="1"/><path d="M 82 332 L 142 332 L 142 312 L 202 312 L 202 432 L 82 432 L 82 332 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10"/><path d="M 142 332 L 202 332" fill="none" stroke="#000000" stroke-miterlimit="10"/><g transform="translate(84,365)"><switch><foreignObject pointer-events="all" width="116" height="14" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 14px; vertical-align: top; width: 116px; white-space: normal; text-align: center;">/home/saya/</div></foreignObject><text x="58" y="13" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Object]</text></switch></g><rect x="257" y="352" width="90" height="20" fill="none" stroke="none"/><g fill="#000000" font-family="Helvetica" font-size="12px"><text x="259" y="365">Samba Server</text></g><path d="M 382 142 L 442 142 L 442 122 L 502 122 L 502 242 L 382 242 L 382 142 Z" fill="#d0d0d0" stroke="#d0d0d0" stroke-miterlimit="10" transform="translate(2,3)" opacity="1"/><path d="M 382 142 L 442 142 L 442 122 L 502 122 L 502 242 L 382 242 L 382 142 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10"/><path d="M 442 142 L 502 142" fill="none" stroke="#000000" stroke-miterlimit="10"/><g transform="translate(384,175)"><switch><foreignObject pointer-events="all" width="116" height="14" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 14px; vertical-align: top; width: 116px; white-space: normal; font-weight: bold; text-align: center;">Host's Folders</div></foreignObject><text x="58" y="13" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica" font-weight="bold">[Object]</text></switch></g><path d="M 382 182 L 208 182" fill="none" stroke="#000000" stroke-miterlimit="10"/><path d="M 203 182 L 210 179 L 208 182 L 210 186 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10"/><rect x="277" y="162" width="90" height="20" fill="none" stroke="none"/><g fill="#000000" font-family="Helvetica" font-size="12px"><text x="279" y="175">VMware Tool</text></g><path d="M 382 332 L 442 332 L 442 312 L 502 312 L 502 432 L 382 432 L 382 332 Z" fill="#d0d0d0" stroke="#d0d0d0" stroke-miterlimit="10" transform="translate(2,3)" opacity="1"/><path d="M 382 332 L 442 332 L 442 312 L 502 312 L 502 432 L 382 432 L 382 332 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10"/><path d="M 442 332 L 502 332" fill="none" stroke="#000000" stroke-miterlimit="10"/><g transform="translate(384,365)"><switch><foreignObject pointer-events="all" width="116" height="14" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 14px; vertical-align: top; width: 116px; white-space: normal; text-align: center;">Haji shared folder</div></foreignObject><text x="58" y="13" fill="#000000" text-anchor="middle" font-size="12px" font-family="Helvetica">[Object]</text></switch></g><path d="M 202 372 L 376 372" fill="none" stroke="#000000" stroke-miterlimit="10"/><path d="M 381 372 L 374 376 L 376 372 L 374 369 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10"/></g></svg>
        <p style="text-align: center">Haji File Sharing Model</p>
      </p>
      <ul>
        <li>
          The folder <span class="al code">/home/saya/cosmos/</span> enables you to visit the shared items from host.
          Before using it, you should specify the folders you want to share in the vm settings.
          This is useful when most testings of your project don't depend on the vm, 
          and you want to save the cpu of your machine.
        </li>
        <li>
          The home folder of Saya is shared via smb protocol.
          Folder <span class="al code">/home/saya/</span> is visible from the host machine.
          This allows you to take the most advantage of the system and gui tools that you are already familiar with.
        </li>
        <li>
          It is recommended that using the <span class="al code">/home/saya/cradle/</span> 
          as the place where the development starts.
        </li>
      </ul>
    </li>

    <li>
      <h2>Access Database Server Remotely</h2>
      <p>
        The easiest way to access the database is to start the apache server and visit port 807 via your browser.
      </p>
      <ul>
        <li>
          It is recommended that using the ssh tunnel to connect to the database.
        </li>
        <li>
          Programs like Navicat support to setup ssh tunnels via GUI easily.
        </li>
        <li>
          You can also create the ssh tunnel manually, and use any db admin tool you prefer. This article may give you a clue:
          <a href="http://www.ibm.com/developerworks/data/library/techarticle/dm-0312lurie/" target="_blank">Tunneling Database Traffic with openSSH and Linux</a>.
        </li>
      </ul>
    </li>

    <li>
      <h2>Installed Programs List</h2>
      <p>
        Only significant ones are listed here. For more details and usages about the programs, 
        search the key words in the list on the web.
      </p>
      <p>
        To optimize the performance, only few services are started automatically, 
        but you can use <span class="al code">sudo sysv-rc-conf</span> to enable them 
        (<a href="#mysql_auto_start">Mysql and Mongodb are not listed in sysv-rc-conf</a>).
      </p>
      <ul>
        <li>
          <h3>Haji helper</h3>
          <p>Common management tasks helper. <a href="https://github.com/ysmood/Haji">Github</a>.</p>
          <pre>haji</pre>
        </li>        
        <li>
          <h3>Zsh 5.0, Tmux 1.6, oh-my-zsh</h3>
          <p>
            The default shell for root and saya. Also with some handy tools for terminal based development.
          </p>
          <pre>zsh</pre>
          Settings location:
          <pre>~/.zshrc</pre>
          <p>â€» Please add your own script into the <span class="al code">~/.bashrc</span> file.</p>
        </li>
        <li>
          <h3>p7zip, 7z, p7zip-rar</h3>
          <pre>p7zip, 7z</pre>
        </li>

        <hr />

        <li>
          <h3>Ruby 1.9, RVM 1.16, Rails 3, Passenger 3</h3>
          <p>
            Use the rvm to manage the version ruby.
          </p>
          <pre>ruby, irb, rails, rvm</pre>
        </li>
        <li>
          <h3>Python 2.7, pip 1.2</h3>
          <pre>python, pip</pre>
        </li>
        <li>
          <h3>Lua 5</h3>
          <pre>lua</pre>
        </li>
        <li>
          <h3>Nodejs 0.8</h3>
          <pre>node npm</pre>
        </li>
        <li>
          <h3>Go 1.0</h3>
          <pre>go</pre>
        </li>
        <li>
          <h3>Php 5</h3>
          <pre>php</pre>
          Settings location:
          <pre>/etc/php5/</pre>
        </li>
        <li>
          <h3>Perl 5.14</h3>
          <pre>perl</pre>
        </li>

        <hr />
        
        <li>
          <h3>Git 1.7</h3>
          <pre>git</pre>
          Settings location:
          <pre>~/.gitconfig</pre>
          <p>
            You might want to quick setup git account by command: <span class="al code">haji setup-git</span>
          </p>
        </li>
        <li>
          <h3>Svn 1.6</h3>
          <pre>svn</pre>
        </li>
        <li>
          <h3>Mercurial 2.0</h3>
          <pre>hg</pre>
        </li>

        <hr />
        
        <li>
          <h3>Mysql 5</h3>
          To start/stop/restart the server:
          <pre>sudo service mysql start/stop/restart</pre>
          <table>
            <tr>
              <td>Admin : </td>
              <td class="al code">root</td>
            </tr>
            <tr>
              <td>Password : </td>
              <td class="al code">root</td>
            </tr>
          </table>
          â€» To enable auto startup, just remove the file <span id="mysql_auto_start" class="al code">/etc/init/mysql.override</span>.
        </li>
        <li>
          <h3>Postgresql 9</h3>
          To start/stop/restart the server:
          <pre>sudo service postgresql start/stop/restart</pre>
          <table>
            <tr>
              <td>Admin : </td>
              <td class="al code">postgres</td>
            </tr>
            <tr>
              <td>Password : </td>
              <td class="al code">root</td>
            </tr>
          </table>
        </li>
        
        <li>
          <h3>MongoDB 2.0</h3>
          To start/stop/restart the server:
          <pre>sudo service mongodb start/stop/restart</pre>
          â€» To enable auto startup, just remove the file /etc/init/mongodb.override.
        </li>

        <hr />
        
        <li>
          <h3>Apache 2</h3>
          <pre>apachectl a2dismod   a2dissite  a2enmod    a2ensite   a2p</pre>
          To start/stop/restart the server:
          <pre>sudo service apache2 start/stop/restart</pre>
          Settings location:
          <pre>/etc/apache2/</pre>
          <p>
            You may want to change the default document root of the server by this command:
          </p>
          <pre>haji set-www-dir</pre>
        </li>
        <li>
          <h3>Nginx 1.1</h3>
          To start/stop/restart the server:
          <pre>sudo nginx</pre>
          <pre>sudo nginx -s stop/reload</pre>
          Settings location:
          <pre>/etc/nginx/</pre>
        </li>
        <li>
          <h3>Tomcat 6</h3>
          To start/stop/restart the server:
          <pre>sudo service tomcat6 start/stop/restart</pre>
          Settings location:
          <pre>/etc/tomcat6/</pre>
        </li>
        <li>
          <h3>Samba 3.6</h3>
          To start/stop/restart the server:
          <pre>sudo service smbd start/stop/restart</pre>
          Settings location:
          <pre>/etc/samba/</pre>
        </li>
      </ul>
    </li>

  </ul>

  <div class="center grey code">Oct 2012 ys</div>

</body>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script type="text/javascript">
  (function(){

  })();
</script>
</html>

